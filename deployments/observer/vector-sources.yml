# Vector sources configuration
# Should be used for both development and production
sources:
  out-metrics-hostmetrics:
    # https://vector.dev/docs/reference/configuration/sources/host_metrics/
    type: host_metrics
    collectors: # default are [cpu disk filesystem load host memory network cgroups]
      - cpu
      - disk
      - filesystem
      - load
      - memory
      - network
      - cgroups
    filesystem:
      devices:
        excludes:
          - "binfmt_misc"
      filesystems:
        excludes:
          - "binfmt_misc"
      mountpoints:
        excludes:
          - "*/proc/sys/fs/binfmt_misc"
    cgroups:
      groups:
        includes: 
          - "system.slice/docker*"
        excludes:
          # https://vector.dev/docs/reference/configuration/sources/host_metrics/#warnings
          - "*/proc/sys/fs/binfmt_misc"

  out-logs-journald:
    # https://vector.dev/docs/reference/configuration/sources/journald/
    type: journald
    current_boot_only: true
    include_matches:
      PRIORITY: ["1", "2", "3", "4"] # 0 (emergency) to 4 (warning)

  out-logs-docker:
    # https://vector.dev/docs/reference/configuration/sources/docker_logs/
    type: docker_logs